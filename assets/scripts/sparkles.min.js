function applySparkleEffect(t,o,a,s,i){document.querySelectorAll(t).forEach((function(t){createSparkle(t,{count:o,color:a,speed:s,overlap:i})}))}function createSparkle(t,o){const a=Object.assign({width:t.offsetWidth,height:t.offsetHeight,color:"#FFFFFF",count:30,overlap:0,speed:1},o);new Sparkle(t,a).over()}document.addEventListener("DOMContentLoaded",(function(){"use strict";applySparkleEffect(".sparkle",40,["#ff0080","#ff0080","#0000FF"],3,30),applySparkleEffect(".sparkle-more",30,["#ff0080","#ff0080","#0000FF"],10,10),applySparkleEffect(".sparkle-less",5,["#ff0080","#ff0080","#0000FF"],2,5)}));class Sparkle{constructor(t,o){this.options=o,this.init(t)}init(t){this.canvas=document.createElement("canvas"),this.canvas.classList.add("sparkle-canvas"),this.canvas.style.position="absolute",this.canvas.style.top=`-${this.options.overlap}px`,this.canvas.style.left=`-${this.options.overlap}px`,this.canvas.style.pointerEvents="none",t.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.sprite=new Image,this.sprites=[0,6,13,20],this.sprite.src="/assets/images/sparkle.png",this.canvas.width=this.options.width+2*this.options.overlap,this.canvas.height=this.options.height+2*this.options.overlap,this.particles=this.createSparkles(this.canvas.width,this.canvas.height),this.anim=null,this.fade=!1}createSparkles(t,o){let a=[];for(let s=0;s<this.options.count;s++){let i=this.options.color;"rainbow"===this.options.color?i="#"+Math.floor(16777215*Math.random()).toString(16):Array.isArray(this.options.color)&&(i=this.options.color[Math.floor(Math.random()*this.options.color.length)]),a[s]={position:{x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*o)},style:this.sprites[Math.floor(4*Math.random())],delta:{x:Math.floor(1e3*Math.random())-500,y:Math.abs(Math.floor(1e3*Math.random())-500)},size:parseFloat((2*Math.random()).toFixed(2)),color:i,opacity:Math.random()}}return a}draw(t,o){const a=this.context;a.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach((o=>{const s=Math.floor(7*Math.random());Math.floor(t)%s==0&&(o.style=this.sprites[Math.floor(4*Math.random())]),a.save(),a.globalAlpha=o.opacity,a.drawImage(this.sprite,o.style,0,7,7,o.position.x,o.position.y,7,7),this.options.color&&(a.globalCompositeOperation="source-atop",a.globalAlpha=.5,a.fillStyle=o.color,a.fillRect(o.position.x,o.position.y,7,7)),a.restore()}))}update(){const t=this;this.anim=requestAnimationFrame((function(o){t.particles.forEach((o=>{const a=Math.random()>2*Math.random(),s=Math.random()>3*Math.random();a&&(o.position.x+=o.delta.x*t.options.speed/1500),s||(o.position.y-=o.delta.y*t.options.speed/800),o.position.x>t.canvas.width&&(o.position.x=-7),o.position.x<-7&&(o.position.x=t.canvas.width),o.position.y>t.canvas.height&&(o.position.y=-7),o.position.y<-7&&(o.position.y=t.canvas.height),t.fade?o.opacity-=.02:o.opacity-=.005,o.opacity<=0&&(o.opacity=t.fade?0:1)})),t.draw(o),t.fade?(t.fadeCount-=1,t.fadeCount<0?cancelAnimationFrame(t.anim):t.update()):t.update()}))}cancel(){this.fadeCount=100}over(){cancelAnimationFrame(this.anim),this.particles.forEach((t=>{t.opacity=Math.random()})),this.fade=!1,this.update()}out(){this.fade=!0,this.cancel()}}