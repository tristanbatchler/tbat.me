function Sparkle(t,o){this.options=o,this.init(t)}$(document).ready((function(t){"use strict";t(".sparkle").sparkleh({count:40,color:["#ff0080","#ff0080","#0000FF"],speed:3,overlap:30}),t(".sparkle-more").sparkleh({count:30,color:["#ff0080","#ff0080","#0000FF"],speed:10,overlap:10}),t(".sparkle-less").sparkleh({count:5,color:["#ff0080","#ff0080","#0000FF"],speed:2,overlap:5})})),$.fn.sparkleh=function(t){return this.each((function(o,i){var a=$(i).css("position","relative"),s=$.extend({width:a.outerWidth(),height:a.outerHeight(),color:"#FFFFFF",count:30,overlap:0,speed:1},t);new Sparkle(a,s).over()}))},Sparkle.prototype={init:function(t){this.$canvas=$("<canvas>").addClass("sparkle-canvas").css({position:"absolute",top:"-"+this.options.overlap+"px",left:"-"+this.options.overlap+"px","pointer-events":"none"}).appendTo(t),this.canvas=this.$canvas[0],this.context=this.canvas.getContext("2d"),this.sprite=new Image,this.sprites=[0,6,13,20],this.sprite.src=this.datauri,this.canvas.width=this.options.width+2*this.options.overlap,this.canvas.height=this.options.height+2*this.options.overlap,this.particles=this.createSparkles(this.canvas.width,this.canvas.height),this.anim=null,this.fade=!1},createSparkles:function(t,o){for(var i=[],a=0;a<this.options.count;a++){var s=this.options.color;"rainbow"==this.options.color?s="#"+("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6):"array"===$.type(this.options.color)&&(s=this.options.color[Math.floor(Math.random()*this.options.color.length)]),i[a]={position:{x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*o)},style:this.sprites[Math.floor(4*Math.random())],delta:{x:Math.floor(1e3*Math.random())-500,y:Math.abs(Math.floor(1e3*Math.random())-500)},size:parseFloat((2*Math.random()).toFixed(2)),color:s}}return i},draw:function(t,o){var i=this.context;i.clearRect(0,0,this.canvas.width,this.canvas.height);for(var a=0;a<this.options.count;a++){var s=this.particles[a],n=Math.floor(7*Math.random());Math.floor(t)%n==0&&(s.style=this.sprites[Math.floor(4*Math.random())]),i.save(),i.globalAlpha=s.opacity,i.drawImage(this.sprite,s.style,0,7,7,s.position.x,s.position.y,7,7),this.options.color&&(i.globalCompositeOperation="source-atop",i.globalAlpha=.5,i.fillStyle=s.color,i.fillRect(s.position.x,s.position.y,7,7)),i.restore()}},update:function(){var t=this;this.anim=window.requestAnimationFrame((function(o){for(var i=0;i<t.options.count;i++){var a=t.particles[i],s=Math.random()>2*Math.random(),n=Math.random()>3*Math.random();s&&(a.position.x+=a.delta.x*t.options.speed/1500),n||(a.position.y-=a.delta.y*t.options.speed/800),a.position.x>t.canvas.width?a.position.x=-7:a.position.x<-7&&(a.position.x=t.canvas.width),a.position.y>t.canvas.height?(a.position.y=-7,a.position.x=Math.floor(Math.random()*t.canvas.width)):a.position.y<-7&&(a.position.y=t.canvas.height,a.position.x=Math.floor(Math.random()*t.canvas.width)),t.fade?a.opacity-=.02:a.opacity-=.005,a.opacity<=0&&(a.opacity=t.fade?0:1)}t.draw(o),t.fade?(t.fadeCount-=1,t.fadeCount<0?window.cancelAnimationFrame(t.anim):t.update()):t.update()}))},cancel:function(){this.fadeCount=100},over:function(){window.cancelAnimationFrame(this.anim);for(var t=0;t<this.options.count;t++)this.particles[t].opacity=Math.random();this.fade=!1,this.update()},out:function(){this.fade=!0,this.cancel()},datauri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAHCAYAAAD5wDa1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNDNFMzM5REEyMkUxMUUzOEE3NEI3Q0U1QUIzMTc4NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNDNFMzM5RUEyMkUxMUUzOEE3NEI3Q0U1QUIzMTc4NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0M0UzMzlCQTIyRTExRTM4QTc0QjdDRTVBQjMxNzg2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM0M0UzMzlDQTIyRTExRTM4QTc0QjdDRTVBQjMxNzg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jzOsUQAAANhJREFUeNqsks0KhCAUhW/Sz6pFSc1AD9HL+OBFbdsVOKWLajH9EE7GFBEjOMxcUNHD8dxPBCEE/DKyLGMqraoqcd4j0ChpUmlBEGCFRBzH2dbj5JycJAn90CEpy1J2SK4apVSM4yiKonhePYwxMU2TaJrm8BpykpWmKQ3D8FbX9SOO4/tOhDEG0zRhGAZo2xaiKDLyPGeSyPM8sCxr868+WC/mvu9j13XBtm1ACME8z7AsC/R9r0fGOf+arOu6jUwS7l6tT/B+xo+aDFRo5BykHfav3/gSYAAtIdQ1IT0puAAAAABJRU5ErkJggg=="},$.fn.imagesLoaded=function(t){var o=this.filter("img"),i=o.length,a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";return o.bind("load.imgloaded",(function(){--i<=0&&this.src!==a&&(o.unbind("load.imgloaded"),t.call(o,this))})).each((function(){if(this.complete||void 0===this.complete){var t=this.src;this.src=a,this.src=t}})),this};